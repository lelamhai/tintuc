<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="css/bootstrap.css">
	<script type="text/javascript" src="jquery-1.9.1.js"></script>
	<script type="text/javascript" src="jquery.maphilight.js"></script>
	<script type="text/javascript">
	$(document).ready(function(){
		$('.map').maphilight();
		var emW = $('.block-map img').width();
		var emH = $('.block-map img').height();
		$('.block-map').width(emW).height(emH).css("margin","auto");

		var add = true,
			add_new = true,
			number_undo = 0,
			choose = false,
			undo = "";

		function reset(){
			add = true;
			add_new = true;
			localStorage.clear();
			$('.form-map *').val("");
			$('#map-tag').find('area.active').removeClass('active');
			number_undo = 0;
			undo="";
			$('.map').maphilight();
		}

		$('.btn-add').click(function(){
			reset();
		});
		$('.btn-remove-all').click(function(){
			$('#map-tag').find('area').remove();
			reset();
		});
		$('.btn-remove-last').click(function(){
			$('#map-tag').find('area').last().remove();
			reset();
		});
		$('.btn-undo').click(function(){
			number_undo --;
			undo = localStorage.getItem( number_undo);
			$('#map-tag').find('area').last().attr('coords',undo);
			$('.map').maphilight();
		});

		$('.block-map')
			.on('click',function(e){
				if ( !add ) return false;


			    var elm = $(this);
			    var xPos = e.pageX - $(elm).offset().left;
			    var yPos = e.pageY - $(elm).offset().top;

		    	if( add_new ){
	    			$('#map-tag').append('<area data-maphilight=\'{"strokeColor":"blue","strokeWidth":1,"fillColor":"4caf50","fillOpacity":0.6}\' shape="poly" coords="">');
					number_undo = 0;
	    			add_new = false;
		    	}

			    var val = $('#map-tag').find('area').last().attr('coords');
			    	undo = val;
			    if(val){
			    	val += ","+xPos+","+yPos
			    } else{
			    	val += xPos+","+yPos
			    }
				localStorage.setItem( number_undo+1 , val);
				number_undo ++;
			    $('#map-tag').find('area').last().attr('coords',val);

				$('.map').maphilight();
				$('#map-tag').find('area.active').removeClass('active');
			})
			.on('click','area',function(){
				$('#map-tag area').removeClass('active');
				if( $('#edit').is(':checked') ){
					$(this).addClass('active');
					choose = true;
					$('#name').val( $(this).attr('id') );
					$('#title').val( $(this).attr('title') );
					$('#des').val( $(this).attr('des') );
					$('#content').val( $(this).attr('content') );
					return false;
				}
			})
		;
		$('.btn-save-element').click(function(){
			if( !choose ){
				localStorage.clear();
				$('#map-tag').find('area').last().attr('id',$('#name').val());
				$('#map-tag').find('area').last().attr('title',$('#title').val());
				$('#map-tag').find('area').last().attr('des',$('#des').val());
				$('#map-tag').find('area').last().attr('content',$('#content').val());
				$('.form-map *').val("");
			}else{
				choose = false;
				$('#map-tag').find('area.active').attr('id',$('#name').val());
				$('#map-tag').find('area.active').attr('title',$('#title').val());
				$('#map-tag').find('area.active').attr('des',$('#des').val());
				$('#map-tag').find('area.active').attr('content',$('#content').val());
				$('#map-tag').find('area.active').removeClass('active');
				$('.form-map *').val("");
			}
		});
	});
	</script>
	<style type="text/css">
		.block-map{
			cursor:crosshair;
			border: 1px solid #d7d7d7;
		}
	</style>
</head>
<body>
	<div class="bg-info panel-body">
		<div class="container text-center ">
			<div class="row">
					<div class="block-map">
						<img src="../../asset/img/data-example/project.png" alt="" class="map" usemap="#planetmap">
						<map id="map-tag" name="planetmap">
							<area
								data-maphilight="
									{
										'strokeColor':'blue',
										'strokeWidth':1,
										'fillColor':'4caf50',
										'fillOpacity':0.6
									}"
									shape="poly"
									coords="
										316.7857131958008, 443,
										322.7857131958008, 395,
										327.7857131958008, 367,
										337.7857131958008, 355,
										337.7857131958008, 339,
										344.7857131958008, 331,
										347.7857131958008, 325,
										349.7857131958008, 325,
										359.7857131958008, 319,
										368.7857131958008, 323,
										371.7857131958008, 329,
										377.7857131958008, 325,
										388.7857131958008, 330,
										391.7857131958008, 327,
										395.7857131958008, 330,
										393.7857131958008, 331,
										393.7857131958008, 333,
										404.7857131958008, 340,
										400.7857131958008, 362,
										401.7857131958008, 362,
										395.7857131958008, 421,
										381.7857131958008, 431,
										374.7857131958008, 438,
										359.7857131958008, 448,
										353.7857131958008, 454,
										349.7857131958008, 460,
										335.7857131958008, 457">

							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="531.7857131958008,322,548.7857131958008,251,551.7857131958008,250,551.7857131958008,245,567.7857131958008,241,567.7857131958008,245,616.7857131958008,237,617.7857131958008,236,625.7857131958008,234,631.7857131958008,242,635.7857131958008,243,633.7857131958008,248,635.7857131958008,256,620.7857131958008,330,605.7857131958008,330,603.7857131958008,334,603.7857131958008,334,602.7857131958008,337,601.7857131958008,338,599.7857131958008,338,597.7857131958008,338,596.7857131958008,339,593.7857131958008,339,583.7857131958008,337,581.7857131958008,338,574.7857131958008,335,575.7857131958008,336,551.7857131958008,330,541.7857131958008,330,537.7857131958008,332,534.7857131958008,332,534.7857131958008,333">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="231.78571319580078,398,235.78571319580078,343,236.78571319580078,336,236.78571319580078,330,237.78571319580078,322,239.78571319580078,316,238.78571319580078,312,247.78571319580078,307,248.78571319580078,309,279.7857131958008,284,281.7857131958008,283,280.7857131958008,281,288.7857131958008,273,298.7857131958008,280,303.7857131958008,277,305.7857131958008,279,307.7857131958008,283,313.7857131958008,290,311.7857131958008,372,294.7857131958008,383,282.7857131958008,391,268.7857131958008,403,258.7857131958008,408,254.78571319580078,409">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="313.7857131958008,283,315.7857131958008,255,319.7857131958008,249,324.7857131958008,250,333.7857131958008,245,356.7857131958008,225,355.7857131958008,222,364.7857131958008,216,373.7857131958008,220,380.7857131958008,220,381.7857131958008,226,388.7857131958008,226,389.7857131958008,244,384.7857131958008,310,377.7857131958008,319,373.7857131958008,323,369.7857131958008,324,358.7857131958008,319,351.7857131958008,321,347.7857131958008,326,344.7857131958008,328,341.7857131958008,334,340.7857131958008,339,336.7857131958008,345,336.7857131958008,348,336.7857131958008,353,336.7857131958008,354,331.7857131958008,349,327.7857131958008,347,324.7857131958008,346,321.7857131958008,343,319.7857131958008,341,316.7857131958008,339,315.7857131958008,339,311.7857131958008,339">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="381.7857131958008,219,384.7857131958008,204,389.7857131958008,197,396.7857131958008,191,402.7857131958008,189,408.7857131958008,186,411.7857131958008,181,415.7857131958008,177,422.7857131958008,172,427.7857131958008,169,430.7857131958008,163,437.7857131958008,161,441.7857131958008,166,445.7857131958008,167,447.7857131958008,167,449.7857131958008,172,455.7857131958008,175,455.7857131958008,178,455.7857131958008,179,447.7857131958008,262,400.7857131958008,293,399.7857131958008,303,394.7857131958008,306,389.7857131958008,304,385.7857131958008,303,388.7857131958008,227,380.7857131958008,225">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="509.7857131958008,229.99999904632568,527.7857131958008,222.99999904632568,543.7857131958008,217.99999904632568,548.7857131958008,217.99999904632568,552.7857131958008,218.99999904632568,559.7857131958008,217.99999904632568,563.7857131958008,215.99999904632568,567.7857131958008,214.99999904632568,580.7857131958008,211.99999904632568,593.7857131958008,209.99999904632568,598.7857131958008,208.99999904632568,600.7857131958008,206.99999904632568,601.7857131958008,200.99999904632568,601.7857131958008,194.99999904632568,601.7857131958008,188.99999904632568,602.7857131958008,178.99999904632568,603.7857131958008,174.99999904632568,617.7857131958008,114.99999904632568,603.7857131958008,95.99999904632568,573.7857131958008,101.99999904632568,542.7857131958008,113.99999904632568,520.7857131958008,117.99999904632568,513.7857131958008,118.99999904632568,506.7857131958008,150.99999904632568,501.7857131958008,178.99999904632568,500.7857131958008,187.99999904632568,500.7857131958008,192.99999904632568,502.7857131958008,192.99999904632568,503.7857131958008,193.99999904632568,504.7857131958008,194.99999904632568,504.7857131958008,196.99999904632568,504.7857131958008,198.99999904632568,504.7857131958008,198.99999904632568,503.7857131958008,201.99999904632568,503.7857131958008,201.99999904632568,500.7857131958008,202.99999904632568,501.7857131958008,202.99999904632568,500.7857131958008,205.99999904632568,500.7857131958008,208.99999904632568,500.7857131958008,210.99999904632568,498.7857131958008,212.99999904632568,498.7857131958008,212.99999904632568,496.7857131958008,214.99999904632568,497.7857131958008,214.99999904632568,501.7857131958008,218.99999904632568,505.7857131958008,225.99999904632568,506.7857131958008,227.99999904632568,506.7857131958008,228.99999904632568">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="635.7857131958008,207.99999904632568,649.7857131958008,200.99999904632568,660.7857131958008,199.99999904632568,667.7857131958008,200.99999904632568,671.7857131958008,203.99999904632568,686.7857131958008,205.99999904632568,691.7857131958008,202.99999904632568,696.7857131958008,204.99999904632568,700.7857131958008,205.99999904632568,721.7857131958008,204.99999904632568,723.7857131958008,204.99999904632568,730.7857131958008,202.99999904632568,732.7857131958008,199.99999904632568,735.7857131958008,194.99999904632568,735.7857131958008,190.99999904632568,735.7857131958008,186.99999904632568,737.7857131958008,176.99999904632568,756.7857131958008,120.99999904632568,751.7857131958008,101.99999904632568,658.7857131958008,95.99999904632568,653.7857131958008,103.99999904632568,640.7857131958008,150.99999904632568,632.7857131958008,189.99999904632568">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="773.7857131958008,218.99999904632568,800.7857131958008,140.99999904632568,828.7857131958008,98.99999904632568,856.7857131958008,106.99999904632568,843.7857131958008,159.99999904632568,833.7857131958008,170.99999904632568,832.7857131958008,174.99999904632568,832.7857131958008,177.99999904632568,832.7857131958008,180.99999904632568,833.7857131958008,182.99999904632568,830.7857131958008,188.99999904632568,829.7857131958008,190.99999904632568,825.7857131958008,193.99999904632568,821.7857131958008,198.99999904632568,817.7857131958008,204.99999904632568,816.7857131958008,206.99999904632568,811.7857131958008,211.99999904632568,808.7857131958008,217.99999904632568,805.7857131958008,221.99999904632568,801.7857131958008,229.99999904632568,799.7857131958008,231.99999904632568,786.7857131958008,228.99999904632568,783.7857131958008,226.99999904632568,778.7857131958008,226.99999904632568,777.7857131958008,223.99999904632568,773.7857131958008,221.99999904632568">
							<area data-maphilight="{'strokeColor':'blue','strokeWidth':1,'fillColor':'4caf50','fillOpacity':0.6}" shape="poly" coords="281.7857131958008,260.9999990463257,281.7857131958008,253.99999904632568,280.7857131958008,249.99999904632568,278.7857131958008,244.99999904632568,278.7857131958008,235.99999904632568,278.7857131958008,230.99999904632568,276.7857131958008,229.99999904632568,273.7857131958008,221.99999904632568,270.7857131958008,221.99999904632568,267.7857131958008,222.99999904632568,264.7857131958008,222.99999904632568,271.7857131958008,212.99999904632568,276.7857131958008,209.99999904632568,280.7857131958008,206.99999904632568,283.7857131958008,204.99999904632568,283.7857131958008,201.99999904632568,284.7857131958008,197.99999904632568,287.7857131958008,191.99999904632568,290.7857131958008,190.99999904632568,292.7857131958008,190.99999904632568,293.7857131958008,185.99999904632568,293.7857131958008,180.99999904632568,293.7857131958008,176.99999904632568,293.7857131958008,171.99999904632568,292.7857131958008,165.99999904632568,292.7857131958008,161.99999904632568,293.7857131958008,158.99999904632568,296.7857131958008,153.99999904632568,297.7857131958008,153.99999904632568,299.7857131958008,148.99999904632568,300.7857131958008,142.99999904632568,302.7857131958008,141.99999904632568,304.7857131958008,140.99999904632568,308.7857131958008,136.99999904632568,308.7857131958008,136.99999904632568,307.7857131958008,132.99999904632568,307.7857131958008,128.99999904632568,309.7857131958008,126.99999904632568,310.7857131958008,125.99999904632568,310.7857131958008,121.99999904632568,311.7857131958008,115.99999904632568,311.7857131958008,112.99999904632568,312.7857131958008,108.99999904632568,312.7857131958008,106.99999904632568,312.7857131958008,103.99999904632568,313.7857131958008,95.99999904632568,311.7857131958008,94.99999904632568,315.7857131958008,94.99999904632568,316.7857131958008,90.99999904632568,316.7857131958008,87.99999904632568,316.7857131958008,85.99999904632568,316.7857131958008,80.99999904632568,316.7857131958008,74.99999904632568,320.7857131958008,74.99999904632568,323.7857131958008,70.99999904632568,323.7857131958008,65.99999904632568,323.7857131958008,64.99999904632568,326.7857131958008,61.999999046325684,328.7857131958008,58.999999046325684,328.7857131958008,55.999999046325684,328.7857131958008,49.999999046325684,332.7857131958008,41.999999046325684,334.7857131958008,50.999999046325684,334.7857131958008,57.999999046325684,334.7857131958008,60.999999046325684,336.7857131958008,62.999999046325684,336.7857131958008,65.99999904632568,337.7857131958008,67.99999904632568,338.7857131958008,68.99999904632568,338.7857131958008,72.99999904632568,337.7857131958008,74.99999904632568,339.7857131958008,76.99999904632568,340.7857131958008,77.99999904632568,341.7857131958008,79.99999904632568,342.7857131958008,88.99999904632568,342.7857131958008,90.99999904632568,342.7857131958008,94.99999904632568,342.7857131958008,98.99999904632568,343.7857131958008,98.99999904632568,342.7857131958008,106.99999904632568,342.7857131958008,110.99999904632568,342.7857131958008,115.99999904632568,344.7857131958008,116.99999904632568,348.7857131958008,117.99999904632568,347.7857131958008,123.99999904632568,345.7857131958008,126.99999904632568,345.7857131958008,131.99999904632568,346.7857131958008,135.99999904632568,346.7857131958008,137.99999904632568,347.7857131958008,137.99999904632568,346.7857131958008,141.99999904632568,350.7857131958008,146.99999904632568,351.7857131958008,152.99999904632568,350.7857131958008,158.99999904632568,348.7857131958008,161.99999904632568,352.7857131958008,162.99999904632568,352.7857131958008,168.99999904632568,351.7857131958008,181.99999904632568,347.7857131958008,210.99999904632568,353.7857131958008,220.99999904632568,352.7857131958008,222.99999904632568,351.7857131958008,224.99999904632568,346.7857131958008,227.99999904632568,344.7857131958008,231.99999904632568,338.7857131958008,237.99999904632568,336.7857131958008,239.99999904632568,330.7857131958008,243.99999904632568,324.7857131958008,245.99999904632568,311.7857131958008,248.99999904632568,313.7857131958008,254.99999904632568,313.7857131958008,257.9999990463257,310.7857131958008,259.9999990463257,300.7857131958008,261.9999990463257,288.7857131958008,263.9999990463257,287.7857131958008,265.9999990463257,287.7857131958008,265.9999990463257">
						</map>
					</div>
					<hr>
					<label for="edit">
						<input type="checkbox" id="edit"> Chỉnh sửa nội dung
					</label>
					<div class="panel-body">
						<span class="btn btn-primary btn-sm btn-undo">Lùi 1 bước</span>
						<span class="btn btn-success btn-sm btn-add">Thêm</span>
						<span class="btn btn-default btn-sm btn-remove-last">Xóa cái mới nhất</span>
						<span class="btn btn-danger btn-sm btn-remove-all">Xóa hết</span>
					</div>
					<div class="debug"></div>
				<br>
				<div class="col-xs-6">
					<form action="" class="form-map">
						<br>
						<h4>Thông tin về Phần tử này</h4>
						<hr>
						<div class="form-group">
							<input type="text" class="form-control" placeholder="ten_phan_tu" id="name">
						</div>
						<div class="form-group">
							<input type="text" class="form-control" placeholder="Tiêu đề" id="title">
						</div>
						<div class="form-group">
							<input type="text" class="form-control" placeholder="Mô tả" id="des">
						</div>
						<div class="form-group">
							<textarea class="form-control" rows="3" id="content" placeholder="Nội dung"></textarea>
						</div>
						<div class="text-center">
							<span class="btn btn-success btn-save-element">Thêm nội dung</span>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</body>
</html>